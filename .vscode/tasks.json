{
  "version": "2.0.0",
  "tasks": [
    // ==================== BACKEND TASKS ====================
    {
      "label": "ğŸ§± Backend: Setup Virtual Environment",
      "type": "shell",
      "command": "python3 -m venv venv && . venv/bin/activate && pip install --upgrade pip && pip install -r requirements.txt && pip install pylint pytest pytest-cov safety bandit black && echo 'âœ… Virtual environment created with LEGO building blocks!'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ Backend: Run Flask App (Development)",
      "type": "shell",
      "command": ". venv/bin/activate && FLASK_DEBUG=True python app.py",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "ğŸ§ª Backend: Run Tests",
      "type": "shell",
      "command": ". venv/bin/activate && pytest tests/ -v",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ“Š Backend: Run Tests with Coverage",
      "type": "shell",
      "command": ". venv/bin/activate && pytest tests/ --cov=. --cov-report=html --cov-report=term",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ¨ Backend: Format Code (Black)",
      "type": "shell",
      "command": ". venv/bin/activate && black app.py --line-length=88",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "âœ¨ Backend: Check Formatting",
      "type": "shell",
      "command": ". venv/bin/activate && black app.py --check --line-length=88",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ” Backend: Lint (Pylint)",
      "type": "shell",
      "command": ". venv/bin/activate && pylint app.py --rcfile=.pylintrc",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ›¡ï¸ Backend: Security Scan (Bandit)",
      "type": "shell",
      "command": ". venv/bin/activate && bandit -r app.py -x tests/",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ” Backend: Dependency Security Check (Safety)",
      "type": "shell",
      "command": ". venv/bin/activate && safety check",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    // ==================== DOCKER TASKS ====================
    {
      "label": "ğŸ³ Docker: Build and Run",
      "type": "shell",
      "command": "docker-compose up -d --build",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "â¹ï¸ Docker: Stop All Containers",
      "type": "shell",
      "command": "docker-compose down",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "ğŸ“‹ Docker: View Logs",
      "type": "shell",
      "command": "docker-compose logs -f",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "ğŸ¥ Docker: Health Check",
      "type": "shell",
      "command": "echo 'ğŸ¥ Health Check - Testing LEGO translation services...' && curl -s http://localhost:5003/ && echo '\\nâœ… Flask App is running!' && curl -s http://localhost:5000/languages && echo '\\nâœ… LibreTranslate is running!'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    // ==================== DEVELOPMENT TASKS ====================
    {
      "label": "ğŸ”§ Dev: Install Dependencies",
      "type": "shell",
      "command": ". venv/bin/activate && pip install --upgrade pip && pip install -r requirements.txt",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "ğŸ“¦ Dev: Update Requirements",
      "type": "shell",
      "command": ". venv/bin/activate && pip freeze > requirements.txt",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "ğŸ§¹ Dev: Clean Cache",
      "type": "shell",
      "command": "find . -type d -name '__pycache__' -exec rm -rf {} + && find . -name '*.pyc' -delete",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    // ==================== GITHUB ACTIONS TASKS ====================
    {
      "label": "ğŸ”§ Lint GitHub Actions Workflows",
      "type": "shell",
      "command": "actionlint .github/workflows/*.yml",
      "problemMatcher": {
        "owner": "actionlint",
        "fileLocation": "relative",
        "pattern": {
          "regexp": "^(.+?):(\\d+):(\\d+): (.+?) \\[(.+?)\\]$",
          "file": 1,
          "line": 2,
          "column": 3,
          "message": 4,
          "code": 5
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    // ==================== COMPOSITE QUALITY CHECKS ====================
    {
      "label": "ğŸ§± Backend: Full Quality Check",
      "dependsOn": [
        "âœ¨ Backend: Check Formatting",
        "ğŸ” Backend: Lint (Pylint)",
        "ğŸ›¡ï¸ Backend: Security Scan (Bandit)",
        "ğŸ” Backend: Dependency Security Check (Safety)"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "ğŸ—ï¸ Full Quality Check (All LEGO Pieces)",
      "dependsOn": [
        "ğŸ”§ Lint GitHub Actions Workflows",
        "âœ¨ Backend: Check Formatting",
        "ğŸ” Backend: Lint (Pylint)",
        "ğŸ›¡ï¸ Backend: Security Scan (Bandit)",
        "ğŸ” Backend: Dependency Security Check (Safety)"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "ğŸš€ Pre-Push Quality Gate",
      "dependsOn": [
        "âœ¨ Backend: Check Formatting",
        "ğŸ” Backend: Lint (Pylint)",
        "ğŸ§ª Backend: Run Tests",
        "ğŸ›¡ï¸ Backend: Security Scan (Bandit)",
        "ğŸ³ Docker: Build and Run"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    // ==================== UTILITY TASKS ====================
    {
      "label": "ğŸ¨ Fix All Formatting",
      "dependsOn": [
        "ğŸ¨ Backend: Format Code (Black)"
      ],
      "dependsOrder": "parallel",
      "problemMatcher": []
    },
    {
      "label": "ğŸ§ª Test XLIFF Translation",
      "type": "shell",
      "command": "echo 'ğŸ§± Testing XLIFF translation with sample file...' && mkdir -p test-files && echo '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n<xliff version=\"1.2\">\\n  <file source-language=\"en\" target-language=\"da\">\\n    <body>\\n      <trans-unit id=\"1\">\\n        <source>Hello World</source>\\n      </trans-unit>\\n    </body>\\n  </file>\\n</xliff>' > test-files/sample.xlf && curl -X POST -F \"file=@test-files/sample.xlf\" http://localhost:5003/upload && echo '\\nâœ… Test file uploaded for translation!'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    }
  ]
}